!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):t.youpinImg=a()}(this,function(){var t=require("url");function a(a){var e=t.parse(a,!0);return delete e.search,e}var e=function(e){"undefined"==typeof document||location;e=t.resolve("https://",e),this.a=a(e),this.mode=e.match(/@base/)?"kingsoft":/app\/shop\/img\?/.test(e)?"standard":"unkown"},n={url:{configurable:!0}};return n.url.get=function(){return t.format(this.a)},n.url.set=function(t){console.warn("u can't set its url")},e.prototype.setWebp=function(){switch(this.mode){case"standard":this.standardAddParam("t","webp");break;case"kingsoft":this.kingsoftAddParam("F","webp")}return this},e.prototype.resize=function(t){var a=t.w,e=t.h;switch(this.mode){case"standard":this.standardAddParams({w:a,h:e});break;case"kingsoft":var n={w:this.kingsoftGetParam("w"),h:this.kingsoftGetParam("h")};if(n.w&&n.h){var r=a/this.kingsoftGetParam("etw")||1,s=e/this.kingsoftGetParam("eth")||1;this.kingsoftAddParams({w:Math.round(r*n.w),h:Math.round(s*n.h)})}this.kingsoftAddParams({etw:a,eth:e})}return this},e.prototype.getSize=function(){return"standard"===this.mode?{w:this.standardGetParam("w"),h:this.standardGetParam("h")}:"kingsoft"===this.mode?{w:this.kingsoftGetParam("etw"),h:this.kingsoftGetParam("eth")}:void 0},e.prototype.standardGetParam=function(t){return this.a.query[t]},e.prototype.kingsoftGetParam=function(t){return(this.a.pathname.match(new RegExp("[?|&]"+t+"=(\\d+)"))||[])[1]},e.prototype.standardAddParams=function(t){Object.assign(this.a.query,t)},e.prototype.standardAddParam=function(t,a){this.a.query[t]=a},e.prototype.kingsoftAddParams=function(t){this.kingsoftAddParam(void 0,void 0,t)},e.prototype.kingsoftAddParam=function(e,n,r){var s,i=(this.a.pathname.match(/@[\s\S]+?(&|$)/,"?")||[""])[0],o=this.a.pathname;i&&(o=o.replace(i,"?"));var d=r||((s={})[e]=n,s),h=a(o);Object.assign(h.query,d),o=t.format(h),i&&(o=o.replace("?",i)),this.a.pathname=o},Object.defineProperties(e.prototype,n),e});
//# sourceMappingURL=youpin-img.umd.js.map
